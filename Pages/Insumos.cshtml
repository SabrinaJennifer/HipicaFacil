@page
@model InsumosModel
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gerenciamento de Estoque</title>
    <link rel="stylesheet" href="~/css/bootstrap-grid.min.css">
    <style>
        /* Estilo para a tabela de cavalos */
        table {
            font-family: Arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        /* Estilo para os botões de ação */
        .acao-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 2px 2px;
            cursor: pointer;
            border-radius: 4px;
        }

        .acao-btn-danger {
            background-color: #dc3545;
        }
    </style>
</head>
<body>
    <h1>Gerenciamento de Estoque</h1>
    <br />
    <form method="post">
        <div class="row g-3">
            <div class="col-md-5">
                <div class="form-floating">
                    <input type="text" class="form-control" id="nomeInsumo" name="nomeInsumo" placeholder=" " required>
                    <label for="nomeInsumo">Nome do Insumo:</label>
                </div>
            </div>
            <div class="row-1">
                <button type="submit" class="btn btn-primary">Adicionar</button>
            </div>
        </div>
        <br />
    </form>
    <!-- Adicionando borda na área de Insumos Registrados -->
    <div id="insumos-container">
        <h3>Estoque</h3>
        @if (Model.Insumos.Count > 0)
        {
            <table id="insumos" class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Ações</th> <!-- Adicionando a coluna de Ações -->
                    </tr>
                </thead>
                <tbody>
                    @foreach (var insumo in Model.Insumos)
                    {
                        <tr>
                            <td>@insumo.Id</td>
                            <td>@insumo.Nome</td>
                            <td class="d-flex">
                                <form method="post">
                                    <input type="hidden" name="idInsumo" value="@insumo.Id" />
                                    <button type="submit" class="btn btn-danger">Apagar</button>
                                </form>
                                <!-- Adicionando um botão "Editar" -->
                                <button type="button" class="btn btn-primary" onclick="mostrarFormEditar('@insumo.Nome', @insumo.Id)">Editar</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            <br />

            <!-- Formulário de edição (inicialmente oculto) -->
            <div id="formEditar">
                <h2>Editar produto</h2>
                <form method="post">
                    <div class="row g-3">
                        <div class="col-md-5">
                            <div class="form-floating">
                                <!-- Mostrar o ID sem permitir edição -->
                                <input type="number" class="form-control" id="idInsumoEditar" name="idInsumoEditar" placeholder=" " required readonly>
                                <label for="idInsumoEditar">ID do Insumo:</label>
                            </div>
                        </div>
                    </div>
                    <div class="row g-3">
                        <div class="col-md-5">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="novoNomeInsumo" name="novoNomeInsumo" placeholder=" " required>
                                <label for="novoNomeInsumo">Novo nome do Insumo:</label>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="row g-3">
                        <div class="col-md-5">
                            <!-- Botão "Cancelar" -->
                            <button type="button" class="btn btn-secondary" onclick="ocultarFormEditar()">Cancelar</button>
                            <button type="submit" class="btn btn-primary">Editar</button>
                        </div>
                    </div>
                </form>
                <br />
            </div>
        }
        else
        {
            <p>Nenhum produto registrado.</p>
        }
    </div>

    <!-- Script JavaScript para mostrar/ocultar o formulário de edição -->
    <script>
        function mostrarFormEditar(nomeInsumo, idInsumo) {
            document.getElementById("novoNomeInsumo").value = nomeInsumo;
            document.getElementById("idInsumoEditar").value = idInsumo;
            document.getElementById("formEditar").style.display = "block";
        }

        function ocultarFormEditar() {
            document.getElementById("formEditar").style.display = "none";
        }
    </script>
</body>
</html>
